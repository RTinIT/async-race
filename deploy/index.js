(()=>{"use strict";var t={307:(t,e,n)=>{n.r(e)},265:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(158)),r=i(n(416)),o=i(n(413));e.default=class{constructor(t){this.main=document.createElement("main"),this.header=document.createElement("header"),this.garage=new s.default(this.main),this.winners=new o.default(this.main),this.nav=new r.default(this.header,this.garage,this.winners),t.append(this.main),t.prepend(this.header)}init(){return this.garage.init(),this.winners.init(),this.main}}},379:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(763)),r=i(n(461));class o extends s.default{constructor(t,e){super(t,null,"div","car",`${e.id}`),this.selectBtn=new r.default(this.node,(()=>{}),"select-btn","select"),this.removeBtn=new r.default(this.node,(()=>{}),"remove-btn","remove"),this.startEngine=new r.default(this.node,(()=>{}),"start-btn","start"),this.stopEngine=new r.default(this.node,(()=>{}),"stop-btn","stop"),this.carName=new s.default(this.node,null,"span","","",`${e.name}`),this.svg=new s.default(this.node,null,"div","svg-container","",`<svg display="none">\n      <symbol id="car" viewBox="0 0 78 56">\n        <g>\n          <path d="M15.532,56.706c-3.977,0-7.213-3.242-7.213-7.197c0-3.998,3.236-7.224,7.213-7.224\n          c3.987,0,7.226,3.226,7.226,7.224C22.758,53.463,19.519,56.706,15.532,56.706z M15.532,45.604c-2.128,0-3.876,1.75-3.876,3.883\n          c0,2.129,1.748,3.879,3.876,3.879c2.141,0,3.886-1.75,3.886-3.879C19.418,47.354,17.673,45.604,15.532,45.604z M64.137,56.706\n          c-3.987,0-7.219-3.242-7.219-7.197c0-3.998,3.231-7.224,7.219-7.224c3.977,0,7.208,3.226,7.208,7.224\n          C71.345,53.463,68.113,56.706,64.137,56.706z M64.137,45.604c-2.144,0-3.895,1.75-3.895,3.883c0,2.129,1.751,3.879,3.895,3.879\n          c2.139,0,3.884-1.75,3.884-3.879C68.021,47.354,66.275,45.604,64.137,45.604z M78.138,44.091c0-7.011-4.365-7.842-4.365-7.842\n          c-6.426-0.912-17.496-1.38-17.496-1.38c-1.016-1.766-5.707-12.039-8.44-12.039c-0.911,0-20.508,0-23.975,0\n          c-3.472,0-9.167,10.024-10.413,12.285c0,0-4.36,0.758-6.416,1.219c-1.142,0.265-4.301,0.324-4.301,9.155H0v3.997h6.654\n          c0-4.908,3.982-8.885,8.878-8.885c4.914,0,8.886,3.977,8.886,8.885h30.827c0-4.908,3.967-8.885,8.892-8.885\n          c4.898,0,8.875,3.977,8.875,8.885h6.524v-5.396H78.138z M35.589,34.191H21.751c1.872-5.831,5.339-9.994,6.801-9.994\n          c1.841,0,7.037,0,7.037,0V34.191z M38.168,34.191v-9.994c0,0,7.141,0,8.974,0c1.854,0,5.893,8.461,7.032,10.625L38.168,34.191z"/>\n        </g>\n      </symbol>\n    </svg>\n    <svg style="fill:${e.color}; width:80px; height:50px;">\n      <use xlink:href="#car"></use>\n    </svg>`)}}e.default=o},743:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{d(i.next(t))}catch(t){r(t)}}function a(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}d((i=i.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(n(763)),o=s(n(379)),a=n(855),d=s(n(28));class l extends r.default{constructor(t,e,n){var i,s,r;super(t,null,"div","",`${n}-page-${e}`),this.cars=[],this.countCars=null===(s=null===(i=this.node.previousSibling)||void 0===i?void 0:i.previousSibling)||void 0===s?void 0:s.childNodes[2],this.pageNumber=null===(r=this.node.previousSibling)||void 0===r?void 0:r.childNodes[1],l.get(e).then((t=>{this.countCars.innerText=t.count?t.count:""})),l.get(e).then((t=>{t.cars.forEach((t=>{const e=new o.default(this.node,t);this.cars.push(e)}))}))}static get(t){return i(this,void 0,void 0,(function*(){const e=yield(0,a.getCars)(t);return{cars:e.arr,count:e.count}}))}update(t){l.get(t).then((t=>{this.cars=[],t.cars.forEach((t=>{const e=new o.default(this.node,t);this.cars.push(e)})),console.log(this.cars)}))}deleteChildren(){return[...this.node.children].map((t=>t.remove()))}isLastPage(t){return i(this,void 0,void 0,(function*(){const e=yield l.get(t);return Math.ceil(+e.count/7)===t}))}getPrevList(t){this.pageNumber.innerText=`${t}`,this.node.id=`garage-page-${t}`,this.update(t)}getNextList(t){this.pageNumber.innerText=`${t}`,this.node.id=`garage-page-${t}`,this.update(t)}deleteCar(t,e){try{(0,a.removeCar)(t).then((()=>{(0,a.getCars)(e).then((t=>(this.countCars.innerHTML=`${t.count?t.count:"0"}`,t))).then((()=>this.update(e)))}))}catch(t){console.log(t)}}drive(t){return i(this,void 0,void 0,(function*(){const e=+t.id,n=t.lastChild,i=document.documentElement.scrollWidth-100,s=yield(0,a.startEngine)(e),{velocity:r}=s,{distance:o}=s,d=o/r;return this.carAnimate=n.animate([{transform:"translateX(0px)"},{transform:`translateX(${i}px)`}],d),this.carAnimate.play(),this.carAnimate.onfinish=()=>{n.style.transform=`translateX(${i}px)`},new Promise((t=>{(0,a.switchToDrive)(e).then((e=>{var n;e.ok&&t(d),500===e.status&&(null===(n=this.carAnimate)||void 0===n||n.pause())}))}))}))}stop(t){const{id:e}=t;(0,a.stopEngine)(+e).then((()=>{var e;null===(e=this.carAnimate)||void 0===e||e.cancel(),t.lastChild.style.transform="translateX(0px)"}))}race(){return i(this,void 0,void 0,(function*(){try{const t=[...this.node.children].map((t=>i(this,void 0,void 0,(function*(){const e=+t.id,n=yield this.drive(t);return console.log(n),{id:e,winner:n}})))),e=yield Promise.race(t),n=new d.default(this.node);if(e){n.show(e.id,(e.winner/1e3).toFixed(2));const t=yield(0,a.createWinner)({id:e.id,wins:1,time:+(e.winner/1e3).toFixed(2)});console.log(t)}}catch(t){console.log(t)}}))}resetRace(){[...this.node.children].forEach((t=>this.stop(t)))}}e.default=l},158:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(763)),r=i(n(743)),o=i(n(219)),a=i(n(800)),d=i(n(924));class l extends s.default{constructor(t){super(t,null,"div","","garage"),this.settings=new a.default(this.node),this.title=new s.default(this.node,null,"h1","garage-title","garage-title",'<span>Garage</span> (<span id="garage-count-car"></span>)'),this.subtitle=new d.default(this.node,"garage"),this.carList=new r.default(this.node,this.subtitle.page,"garage"),this.pagination=new o.default(this.node,"garage","garage")}init(){this.node.onclick=t=>{const e=t.target;(t=>{var n;const i={"create-btn":()=>{this.carList.deleteChildren(),this.settings.addCar({name:`${this.settings.inputNameCreate.getValue()}`,color:`${this.settings.inputColorCreate.getValue()}`},this.subtitle.page).then((()=>this.carList.update(this.subtitle.page)))},"remove-btn":()=>{var t;const n=null===(t=e.parentElement)||void 0===t?void 0:t.id;this.carList.deleteChildren(),this.carList.deleteCar(n?+n:0,this.subtitle.page),this.subtitle.changePage()},"select-btn":()=>{var t;const n=e.parentElement;n.classList.add("selected");const i=n.children[4].textContent,s=(null===(t=n.lastChild)||void 0===t?void 0:t.lastChild).style.fill;this.settings.selectCar(i,s,n.id)},"update-btn":()=>{const t=this.settings.inputNameUpdate.node.value,e=this.settings.inputColorUpdate.node.value;this.settings.changeCar(t,e,this.subtitle.page),this.carList.deleteChildren();const n=[...this.node.children[3].children].find((t=>t.classList.contains("selected")));null==n||n.classList.remove("selected")},"generate-btn":()=>{this.carList.deleteChildren(),this.settings.genereteRandomCars(this.subtitle.page),this.carList.update(this.subtitle.page)},"start-btn":()=>{const t=e.parentElement;this.carList.drive(t)},"stop-btn":()=>{const t=e.parentElement;this.carList.stop(t)},"race-btn":()=>{this.carList.race()},"reset-btn":()=>{this.carList.resetRace()},"garage-prev-btn":()=>{this.carList.deleteChildren(),1===this.subtitle.page?this.carList.getPrevList(1):(this.subtitle.page-=1,this.carList.getPrevList(this.subtitle.page))},"garage-next-btn":()=>{this.carList.deleteChildren(),this.carList.isLastPage(this.subtitle.page).then((t=>{t||(this.subtitle.page+=1),this.carList.getNextList(this.subtitle.page)}))}};return null!==(n=i[t])&&void 0!==n?n:()=>null})(e.id)()}}}e.default=l},27:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,n="div",i="",s=""){const r=document.createElement(n);r.className=i,r.id=s,e&&r.setAttribute(`${e.key}`,`${e.value}`),t&&t.append(r),this.node=r}getValue(){return this.node.value}destroy(){this.node.remove()}}},800:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(855),r=i(n(763)),o=i(n(461)),a=n(567),d=i(n(27)),l=n(492);class c extends r.default{constructor(t){super(t,null,"div","settings",""),this.selectedCarId="",this.inputNameCreate=new d.default(this.node,{key:"type",value:"text"},"input","settings-create","create-name"),this.inputColorCreate=new d.default(this.node,{key:"type",value:"color"},"input","settings-create","create-color"),this.createBtn=new o.default(this.node,(()=>{}),"create-btn","create"),this.inputNameUpdate=new d.default(this.node,{key:"type",value:"text"},"input","settings-update","update-name"),this.inputColorUpdate=new d.default(this.node,{key:"type",value:"color"},"input","settings-update","update-color"),this.updateBtn=new o.default(this.node,(()=>{console.log("cliked-updpate")}),"update-btn","update"),this.raceBtn=new o.default(this.node,(()=>{}),"race-btn","race"),this.resetBtn=new o.default(this.node,(()=>{}),"reset-btn","reset"),this.generateBtn=new o.default(this.node,(()=>{}),"generate-btn","generate")}addCar(t,e){var n,i;null===(n=this.node.parentNode)||void 0===n||n.childNodes[3];const r=null===(i=this.node.nextSibling)||void 0===i?void 0:i.childNodes[2],o=(0,s.createCar)(t).then((()=>{(0,s.getCars)(e).then((t=>{r.innerHTML=`${t.count?t.count:"0"}`}))}));return Promise.all([o])}selectCar(t,e,n){this.inputNameUpdate.node.value=t,this.inputColorUpdate.node.value=(0,a.rgbToHex)(e),this.selectedCarId=n}changeCar(t,e,n){var i,r;null===(i=this.node.parentNode)||void 0===i||i.childNodes[3];const o=null===(r=this.node.nextSibling)||void 0===r?void 0:r.childNodes[2];try{const i={name:t,color:e};(0,s.updateCar)(i,+this.selectedCarId).then((()=>{(0,s.getCars)(n).then((t=>(o.innerHTML=`${t.count?t.count:"0"}`,t)))}))}catch(t){console.log(t)}}genereteRandomCars(t){var e,n;null===(e=this.node.parentNode)||void 0===e||e.childNodes[3];const i=null===(n=this.node.nextSibling)||void 0===n?void 0:n.childNodes[2];try{const e=(0,a.generateRandom)(l.carsBrand,l.carsModel,l.colors).map((t=>(0,s.createCar)(t).then((t=>t))));Promise.all(e).then((()=>{(0,s.getCars)(t).then((t=>(i.innerHTML=`${t.count?t.count:"0"}`,t)))}))}catch(t){console.log(t)}}}e.default=c},461:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(763));class r extends s.default{constructor(t,e,n,i=""){super(t,null,"button","",n,i),this.handler=e,this.node.onclick=()=>{this.handler()}}}e.default=r},763:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,n="div",i="",s="",r=""){const o=document.createElement(n);o.className=i,o.id=s,o.innerHTML=r,e&&o.setAttribute(`${e.key}`,`${e.value}`),t&&t.append(o),this.node=o}destroy(){this.node.remove()}}},416:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(763)),r=i(n(461));class o extends s.default{constructor(t,e,n){super(t,null,"nav","nav"),this.toGarage=new r.default(this.node,(()=>{e.node.classList.remove("hidden"),n.node.classList.add("hidden")}),"togarage-btn","to garage"),this.toWinners=new r.default(this.node,(()=>{n.node.classList.remove("hidden"),e.node.classList.add("hidden"),n.winnersList.deleteChildren(),n.winnersList.update(n.subtitle.page)}),"towinners-btn","to winners")}}e.default=o},924:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{d(i.next(t))}catch(t){r(t)}}function a(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}d((i=i.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(855),o=s(n(763));class a extends o.default{constructor(t,e){super(t,null,"h3",`${e}-subtitle`,`${e}-subtitle`),this.page=1,this.node.innerHTML=`<span>Page #</span><span id="${e}-page-number">${this.page}</span>`,this.pageElem=this.node.childNodes[1]}static isLastPage(t){return i(this,void 0,void 0,(function*(){const e=yield(0,r.getCars)(t);return Math.ceil(+e.count/7)===t}))}prevPage(){return this.page>1&&(this.page-=1),this.pageElem.innerHTML=`${this.page}`,this.page}nextPage(){return a.isLastPage(this.page)||(this.page+=1),this.pageElem.innerHTML=`${this.page}`,this.page}changePage(){return i(this,void 0,void 0,(function*(){return 0===(yield(0,r.getCars)(this.page)).arr.length&&(this.page-=1),this.page}))}}e.default=a},219:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(763));class r extends s.default{constructor(t,e,n){super(t,null,"div","pagination",e),this.node.innerHTML=`\n      <button id=${n}-prev-btn>prev</button>\n      <button id=${n}-next-btn>next</button>\n    `}}e.default=r},28:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(763)),r=n(855);class o extends s.default{constructor(t){super(t,null,"h3","modal","")}show(t,e){(0,r.getCar)(t).then((t=>{this.node.textContent=`${t.name} is the Winner(${e})!`,setTimeout((()=>this.destroy()),8e3)}))}}e.default=o},4:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.HEADERS=e.Path=e.SERVER_URL=void 0,e.SERVER_URL="http://127.0.0.1:3000",(n=e.Path||(e.Path={})).garage="/garage",n.winners="/winners",n.page="_page",n.limit="_limit",n.engine="/engine",n.started="started",n.stopped="stopped",n.drive="drive",e.HEADERS={"Content-Type":"application/json"}},492:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.colors=e.carsModel=e.carsBrand=void 0,e.carsBrand=["Mersedes","BMW","Audi","Volvo","KIA","Skoda","Ford","Tesla","Subaru","Lamborgini"],e.carsModel=["X6","Benz","Mustang","Forester","Q3","Model S","XC90","Urus","RIO","Rapid"],e.colors=["#7FFFD4","#78DBE2","#E32636","#9966CC","#755D9A","#FFDC33","#FF97BB","#B00000","#F64A46","#DCDCDC","#00541F","#00BFFF","#FFDB58","#B2EC5D","#FFFFFF","#1E90FF"]},855:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{d(i.next(t))}catch(t){r(t)}}function a(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}d((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.sort=e.getWinner=e.createWinner=e.switchToDrive=e.stopEngine=e.startEngine=e.getWinners=e.updateCar=e.removeCar=e.createCar=e.getCar=e.getCars=void 0;const s=n(4);e.getCars=(t=1)=>i(void 0,void 0,void 0,(function*(){const e=yield fetch(`${s.SERVER_URL}${s.Path.garage}?${s.Path.page}=${t}&${s.Path.limit}=7`);return{count:e.headers.get("X-Total-Count"),arr:yield e.json()}})),e.getCar=t=>i(void 0,void 0,void 0,(function*(){const e=yield fetch(`${s.SERVER_URL}${s.Path.garage}/${t}`);return yield e.json()})),e.createCar=t=>i(void 0,void 0,void 0,(function*(){const e=yield fetch(s.SERVER_URL+s.Path.garage,{method:"POST",headers:s.HEADERS,body:JSON.stringify(t)});return yield e.json()})),e.removeCar=t=>i(void 0,void 0,void 0,(function*(){const e=yield fetch(`${s.SERVER_URL}${s.Path.garage}/${t}`,{method:"DELETE"});return yield e.json()})),e.updateCar=(t,e)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${s.SERVER_URL}${s.Path.garage}/${e}`,{method:"PUT",headers:s.HEADERS,body:JSON.stringify(t)});return yield n.json()})),e.getWinners=(t=1)=>i(void 0,void 0,void 0,(function*(){const e=yield fetch(`${s.SERVER_URL}${s.Path.winners}?${s.Path.page}=${t}&${s.Path.limit}=10`);return{count:e.headers.get("X-Total-Count"),arr:yield e.json()}})),e.startEngine=t=>i(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${s.SERVER_URL}${s.Path.engine}?id=${t}&status=started`,{method:"PATCH"}),n=yield e.json();return{velocity:n.velocity,distance:n.distance}}catch(t){throw new Error(t)}})),e.stopEngine=t=>i(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`${s.SERVER_URL}${s.Path.engine}?id=${t}&status=stopped`,{method:"PATCH"});return yield e.json()}catch(t){throw new Error(t)}})),e.switchToDrive=t=>i(void 0,void 0,void 0,(function*(){try{return yield fetch(`${s.SERVER_URL}${s.Path.engine}?id=${t}&status=drive`,{method:"PATCH"})}catch(t){throw new Error(t)}})),e.createWinner=t=>i(void 0,void 0,void 0,(function*(){try{return yield fetch(s.SERVER_URL+s.Path.winners,{method:"POST",headers:s.HEADERS,body:JSON.stringify(t)})}catch(t){throw new Error(t)}})),e.getWinner=t=>i(void 0,void 0,void 0,(function*(){try{return yield fetch(`${s.SERVER_URL}${s.Path.winners}/${t}`,{method:"GET"})}catch(t){throw new Error(t)}})),e.sort=(t,e)=>i(void 0,void 0,void 0,(function*(){try{return yield fetch(`${s.SERVER_URL}${s.Path.winners}?${e}`,{method:"GET"})}catch(t){throw new Error(t)}}))},567:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.generateRandom=e.rgbToHex=void 0,e.rgbToHex=t=>`#${t.slice(4,-1).split(", ").map((t=>+t)).map((t=>1===t.toString(16).length?`0${t.toString(16)}`:`${t.toString(16)}`)).join("")}`;const n=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;e.generateRandom=(t,e,i)=>{const s=[];for(let r=0;r<100;r+=1){const r={name:`${t[n(0,9)]} ${e[n(0,9)]}`,color:`${i[n(0,14)]}`};s.push(r)}return s}},782:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{d(i.next(t))}catch(t){r(t)}}function a(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}d((i=i.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(855),o=s(n(763));class a extends o.default{constructor(t,e,n){super(t,null,"tr","",`${e.id}`),this.number=n,a.get(e.id).then((t=>{const{color:n}=t,{name:i}=t;this.node.innerHTML=`\n      <td>${this.number}</td>\n      <td>\n          <svg style="fill:${n}; width:50px; height:30px;">\n            <use xlink:href="#car"></use>\n          </svg>\n      </td>\n      <td>${i}</td>\n      <td>${e.wins}</td>\n      <td>${e.time}</td>\n      `}))}static get(t){return i(this,void 0,void 0,(function*(){return yield(0,r.getCar)(t)}))}}e.default=a},413:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(763)),r=i(n(219)),o=i(n(924)),a=i(n(670));class d extends s.default{constructor(t){super(t,null,"div","hidden","winners"),this.title=new s.default(this.node,null,"h2","winners-title","winners-title",'<span>Winners</span> (<span id="winners-count-car"></span>)'),this.subtitle=new o.default(this.node,"winners"),this.winnersList=new a.default(this.node,this.subtitle.page,"winners"),this.pagination=new r.default(this.node,"winners","winners")}init(){this.node.onclick=t=>{const e=t.target;"Best time (seconds)"===e.textContent&&(e.classList.contains("sorted")?(e.classList.remove("sorted"),e.classList.add("revers-sorted"),this.winnersList.sort(this.subtitle.page,"_sort=time&_order=desc")):(e.classList.add("sorted"),this.winnersList.sort(this.subtitle.page,"_sort=time"))),"Wins"===e.textContent&&(e.classList.contains("sorted")?(e.classList.remove("sorted"),e.classList.add("revers-sorted"),this.winnersList.sort(this.subtitle.page,"_sort=wins&_order=desc")):(e.classList.add("sorted"),this.winnersList.sort(this.subtitle.page,"_sort=wins")))}}}e.default=d},670:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{d(i.next(t))}catch(t){r(t)}}function a(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}d((i=i.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(855),o=s(n(763)),a=s(n(782));class d extends o.default{constructor(t,e,n){var i,s,r;super(t,null,"table","",`${n}-page-${e}`),this.winnersList=[],this.winnerId=0,this.winnerWins=0,this.winnerTime=0,this.header=new o.default(this.node,null,"tr","","table-head","\n    <tr>\n      <th>Number</th>\n      <th>Car</th>\n      <th>Name</th>\n      <th>Wins</th>\n      <th>Best time (seconds)</th>\n    </tr>\n    "),this.countCars=null===(s=null===(i=this.node.parentNode)||void 0===i?void 0:i.firstChild)||void 0===s?void 0:s.childNodes[2],this.pageNumber=null===(r=this.node.previousSibling)||void 0===r?void 0:r.childNodes[1],d.get(e).then((t=>{this.countCars.innerText=t.count?t.count:""})),d.get(e).then((t=>{t.cars.forEach(((t,e)=>{const n=new a.default(this.node,t,e+1);this.winnersList.push(n)}))}))}static get(t){return i(this,void 0,void 0,(function*(){const e=yield(0,r.getWinners)(t);return{cars:e.arr,count:e.count}}))}update(t){d.get(t).then((t=>{t.cars.forEach(((t,e)=>{const n=new a.default(this.node,t,e+1);this.winnersList.push(n)}))}))}deleteChildren(){return[...this.node.children].forEach((t=>{t!==this.node.firstChild&&t.remove()}))}sort(t,e){(0,r.sort)(t,e).then((t=>t.json())).then((t=>{this.winnersList=[],this.deleteChildren(),t.forEach(((t,e)=>{const n=new a.default(this.node,t,e+1);this.winnersList.push(n)}))}))}}e.default=d},607:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(265));n(307),new s.default(document.body).init()}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(607)})();